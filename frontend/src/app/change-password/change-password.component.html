<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Alterar senha</h5>
          <form *ngIf="form" [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
            <div class="mb-3">
              <label for="currentPassword" class="form-label">Senha atual</label>
              <input id="currentPassword" type="password" class="form-control rounded-pill" formControlName="currentPassword" autocomplete="current-password" [ngClass]="{'is-invalid': submitted && f['currentPassword'].errors}">
              <div class="invalid-feedback" *ngIf="submitted && f['currentPassword'].errors">Informe sua senha atual</div>
            </div>
            <div class="mb-3">
              <label for="newPassword" class="form-label">Nova senha</label>
              <input id="newPassword" type="password" class="form-control rounded-pill" formControlName="newPassword" autocomplete="new-password" [ngClass]="{'is-invalid': submitted && f['newPassword'].errors}">
              <div class="invalid-feedback" *ngIf="submitted && f['newPassword'].errors">Informe uma senha válida (mínimo 6 caracteres)</div>
            </div>
            <div class="mb-3">
              <label for="confirmNewPassword" class="form-label">Confirmar nova senha</label>
              <input id="confirmNewPassword" type="password" class="form-control rounded-pill" formControlName="confirmNewPassword" autocomplete="new-password" [ngClass]="{'is-invalid': submitted && f['confirmNewPassword'].errors}">
              <div class="invalid-feedback" *ngIf="submitted && f['confirmNewPassword'].errors?.['mismatch']">As senhas não conferem</div>
            </div>

            <button class="btn btn-red w-100" [disabled]="loading">Atualizar senha</button>
            <div class="d-flex align-items-center mt-2" *ngIf="loading">
              <div class="spinner-border spinner-border-sm me-2" aria-hidden="true"></div>
              <output aria-live="polite">Processando...</output>
            </div>
            <output class="text-success mt-2" *ngIf="success" aria-live="polite">{{ success }}</output>
            <div class="text-danger mt-2" *ngIf="error" role="alert" aria-live="assertive">{{ error }}</div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>